package com.entity;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;
import java.util.Scanner;

import com.Services.Service;
import com.Services.Service_Impl;

public class Customer implements Runnable {
	
	private String Name;
	private int orderId;
	private List<Food> Menu=new ArrayList<>();
	private Map<Food,Integer> ordered=new HashMap<>();
	private Scanner sc;
	
	public Customer(String name,List<Food> Menu,Scanner sc) {
		super();
		
		this.Name = name;
		Random random = new Random();
		orderId = 1000 + random.nextInt(9000);
		this.Menu=Menu;
		this.sc=sc;
	}

	public String getName() {
		return Name;
	}

	public void setName(String name) {
		Name = name;
	}

	@Override
	public void run() {
		Service serv=new Service_Impl();
		System.out.println("Hi, I am "+this.getName()+"I like To order Some Food");
		System.out.println("Oh ,Here's the Menu");	
		for(Food f:this.Menu) {
			System.out.println("id:"+f.getId()+" ,Name:"+f.getName()+" ,Price:"+f.getPrice());
		}
		boolean Continue=true;
		while(Continue) {
			System.out.println("Select Id of the food Displayed Above to Order");
			int id=sc.nextInt();
			Food selectedFood=serv.selectById(id, Menu);
			if(selectedFood==null) {
				System.out.println("Food Not Found ");
				break;
			}
			System.out.println("Enter The quantity of the food:");
			int Quantity=sc.nextInt();
			
//			ordered.put(selectedFood, Quantity);
			ordered.put(selectedFood, ordered.getOrDefault(selectedFood,0)+Quantity);
			
			
			System.out.println("Do you Want to add more:Enter 'yes' or 'no'");
			if(sc.next().equalsIgnoreCase("yes")) {
				Continue=true;
			}else {
				Continue=false;
			}
			
		}
		
		System.out.println("Check your Order");
		for(Map.Entry<Food, Integer> entry:ordered.entrySet()) {
			String Name=entry.getKey().getName();
			int quantity=entry.getValue();
			double price=entry.getKey().getPrice();
			double totalPrice=price*quantity;
			System.out.println(entry.getKey().getName()+"x"+entry.getValue()+"="entry.getKey().getPrice()*entry.getValue());
		}
		
		
		
	}

}
